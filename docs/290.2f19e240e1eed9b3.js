"use strict";(self.webpackChunkFreshCard=self.webpackChunkFreshCard||[]).push([[290],{779:(g,m,c)=>{c.d(m,{N:()=>b});var l=c(5619),p=c(4769),t=c(9862);let b=(()=>{class _{constructor(i){this._HttpClient=i,this.cartNumber=new l.X(0),this.baseUrl="https://ecommerce.routemisr.com/api/v1/"}addToCart(i){return this._HttpClient.post(this.baseUrl+"cart",{productId:i})}getCartUser(){return this._HttpClient.get(this.baseUrl+"cart")}removeCartItem(i){return this._HttpClient.delete(this.baseUrl+`cart/${i}`)}updateCartCount(i,d){return this._HttpClient.put(this.baseUrl+`cart/${i}`,{count:d})}clearCart(){return this._HttpClient.delete(this.baseUrl+"cart")}checkOut(i,d){return this._HttpClient.post(this.baseUrl+`orders/checkout-session/${i}?url=http://localhost:4200`,{shippingAddress:d})}getAllOrders(){let i=localStorage.getItem("userId");return this._HttpClient.get(this.baseUrl+`orders/user/${i}`)}static#t=this.\u0275fac=function(d){return new(d||_)(p.LFG(t.eN))};static#e=this.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()},5290:(g,m,c)=>{c.r(m),c.d(m,{CartComponent:()=>v});var l=c(6814),p=c(1120),t=c(4769),b=c(779);function _(o,C){if(1&o){const e=t.EpF();t.TgZ(0,"div",14)(1,"div",15),t._UZ(2,"img",16),t.qZA(),t.TgZ(3,"div",17)(4,"div",18)(5,"div",19)(6,"h3",20),t._uU(7),t.qZA(),t.TgZ(8,"button",21,22),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.MAs(9),u=t.oxw(2);return t.KtG(u.removeItem(s.product._id,a))}),t._UZ(10,"i",23),t._uU(11,"Remove"),t.qZA()(),t.TgZ(12,"div",24)(13,"button",25,26),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.MAs(14),u=t.MAs(19),h=t.oxw(2);return t.KtG(h.changeCount(s.count-1,s.product._id,a,u))}),t._UZ(15,"i",27),t.qZA(),t.TgZ(16,"span",28),t._uU(17),t.qZA(),t.TgZ(18,"button",25,29),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.MAs(14),u=t.MAs(19),h=t.oxw(2);return t.KtG(h.changeCount(s.count+1,s.product._id,a,u))}),t._UZ(20,"i",30),t.qZA()(),t.TgZ(21,"div",24)(22,"p",31),t._uU(23),t.qZA()()()()()}if(2&o){const e=C.$implicit;t.xp6(2),t.Q6J("src",e.product.imageCover,t.LSH)("alt",e.product.title),t.xp6(5),t.Oqu(e.product.title),t.xp6(10),t.Oqu(e.count),t.xp6(6),t.hij("Price : ",e.price,"EGP")}}const f=function(o){return["/payment",o]};function i(o,C){if(1&o){const e=t.EpF();t.TgZ(0,"section",3)(1,"div",4)(2,"div",5),t._UZ(3,"i",6),t.qZA(),t.TgZ(4,"div",5)(5,"h2",5),t._uU(6,"My Cart"),t.qZA()(),t.TgZ(7,"h6",7),t._uU(8,"Total Price :"),t.TgZ(9,"span",8),t._uU(10),t.qZA()(),t.YNc(11,_,24,5,"div",9),t.TgZ(12,"div",10)(13,"button",11),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.clear())}),t._uU(14,"Clear All"),t.qZA(),t.TgZ(15,"button",12),t._uU(16,"Online Payment "),t._UZ(17,"img",13),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(10),t.hij("",e.cartDetalis.totalCartPrice,"EGP"),t.xp6(1),t.Q6J("ngForOf",e.cartDetalis.products),t.xp6(4),t.Q6J("routerLink",t.VKq(3,f,e.cartDetalis._id))}}function d(o,C){1&o&&t._UZ(0,"div",32)}let v=(()=>{class o{constructor(e,r){this._CartService=e,this._Renderer2=r,this.cartDetalis=null}ngOnInit(){this._CartService.getCartUser().subscribe({next:e=>{this.cartDetalis=e.data}})}removeItem(e,r){this._Renderer2.setAttribute(r,"disabled","true"),this._CartService.removeCartItem(e).subscribe({next:n=>{console.log(n),this.cartDetalis=n.data,this._Renderer2.removeAttribute(r,"disabled"),this._CartService.cartNumber.next(n.numOfCartItems)},error:n=>{this._Renderer2.removeAttribute(r,"disabled")}})}changeCount(e,r,n,s){e>=1&&(this._Renderer2.setAttribute(n,"disabled","true"),this._Renderer2.setAttribute(s,"disabled","true"),this._CartService.updateCartCount(r,e).subscribe({next:a=>{this.cartDetalis=a.data,this._Renderer2.removeAttribute(n,"disabled","true"),this._Renderer2.removeAttribute(s,"disabled","true")},error:a=>{this._Renderer2.removeAttribute(n,"disabled"),this._Renderer2.removeAttribute(s,"disabled")}}))}clear(){this._CartService.clearCart().subscribe({next:e=>{console.log(e),"success"===e.message&&(this.cartDetalis=null,this._CartService.cartNumber.next(0))}})}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(b.N),t.Y36(t.Qsj))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-cart"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["class","paddin",4,"ngIf","ngIfElse"],["class","paddin mt-5"],["msg",""],[1,"paddin"],[1,"container","w-75","mx-auto","rounded","shadow","bg-main-light","my-5","p-5"],[1,"text-center"],[1,"fa-solid","fa-basket-shopping","fa-bounce","text-main","text-center","fa-3x"],[1,"fw-bold","text-end","border-bottom","me-5","px-3","p-3"],[1,"text-main"],["class","row border-bottom py-2",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","w-75","mx-auto"],["type","button",1,"btn","btn-outline-danger","mt-4","fw-bold",3,"click"],[1,"btn","butn","mt-4","fw-bold",3,"routerLink"],["src","./assets/imgs/prepaid-visa-hero.webp","alt","",1,"viza"],[1,"row","border-bottom","py-2"],[1,"col-md-1"],[1,"w-100",3,"src","alt"],[1,"col-md-11"],[1,"row","d-flex","justify-content-evenly","align-items-center"],[1,"col-md-6"],[1,"h6","fw-bold","text-muted"],[1,"btn","m-0","p-0","text-danger",3,"click"],["btnRemove",""],[1,"fa-solid","fa-trash-can","p-2"],[1,"col-md-3"],[1,"btn","btn-sm","border-success",3,"click"],["btn1",""],[1,"fa-solid","fa-minus"],[1,"mx-2"],["btn2",""],[1,"fa-solid","fa-plus"],[1,"text-main","mb-0"],[1,"w-50","mx-auto","templet","mt-5","mb-0"]],template:function(r,n){if(1&r&&(t.YNc(0,i,18,5,"section",0),t.YNc(1,d,1,0,"ng-template",1,2,t.W1O)),2&r){const s=t.MAs(2);t.Q6J("ngIf",n.cartDetalis)("ngIfElse",s)}},dependencies:[l.ez,l.sg,l.O5,p.rH],styles:[".butn[_ngcontent-%COMP%]{border:1px solid #08e208;color:#08e208}.butn[_ngcontent-%COMP%]:hover{background-color:#08e208;color:#fff}.templet[_ngcontent-%COMP%]{margin:200px;padding-top:200px;color:#fff;height:100vh;background-image:url(pngwing.com.6e329bd9b9d0b196.png);background-size:cover;background-position:center}.viza[_ngcontent-%COMP%]{width:50px}h2[_ngcontent-%COMP%]{font-weight:800;font-size:2rem;border-bottom:3px solid #ffc908;display:inline-block}"]})}return o})()}}]);