"use strict";(self.webpackChunkFreshCard=self.webpackChunkFreshCard||[]).push([[932],{6666:(E,_,r)=>{r.r(_),r.d(_,{LoginComponent:()=>C});var p=r(6814),l=r(95),e=r(4769),f=r(5342),h=r(1120);function v(t,a){if(1&t&&(e.TgZ(0,"div",12)(1,"p",13),e._uU(2),e.qZA()()),2&t){const i=e.oxw();e.xp6(2),e.Oqu(i.errMessage)}}function Z(t,a){1&t&&(e.TgZ(0,"p",16),e._uU(1," email Is Required"),e.qZA())}function I(t,a){1&t&&(e.TgZ(0,"p",16),e._uU(1,"Email Invalid Format"),e.qZA())}function T(t,a){if(1&t&&(e.TgZ(0,"div",14),e.YNc(1,Z,2,0,"p",15),e.YNc(2,I,2,0,"p",15),e.qZA()),2&t){const i=e.oxw();let o,n;e.xp6(1),e.Q6J("ngIf",null==(o=i.loginForm.get("email"))?null:o.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(n=i.loginForm.get("email"))?null:n.getError("email"))}}function w(t,a){1&t&&(e.TgZ(0,"p",16),e._uU(1," password Is Required"),e.qZA())}function F(t,a){1&t&&(e.TgZ(0,"p",16),e._uU(1,"Must be at least 6 chars"),e.qZA())}function L(t,a){if(1&t&&(e.TgZ(0,"div",14),e.YNc(1,w,2,0,"p",15),e.YNc(2,F,2,0,"p",15),e.qZA()),2&t){const i=e.oxw();let o,n;e.xp6(1),e.Q6J("ngIf",null==(o=i.loginForm.get("password"))?null:o.getError("required")),e.xp6(1),e.Q6J("ngIf",null==(n=i.loginForm.get("password"))?null:n.getError("pattern"))}}function x(t,a){1&t&&(e.TgZ(0,"span"),e._UZ(1,"i",17),e.qZA())}let C=(()=>{class t{constructor(i,o){this._authService=i,this._Router=o,this.errMessage="",this.isLoading=!1,this.loginForm=new l.cw({email:new l.NI("",[l.kI.required,l.kI.email]),password:new l.NI("",[l.kI.required,l.kI.pattern(/^[a-zA-Z0-9_@]{6,}$/)])})}handleForm(){let i=this.loginForm.value;this.isLoading=!0,!0===this.loginForm.valid&&this._authService.login(i).subscribe({next:o=>{"success"==o.message&&(localStorage.setItem("userToken",o.token),this._authService.GetUserData(o.user.email).subscribe(n=>{n.users?.length>0&&localStorage.setItem("userId",n.users[0]._id)}),this._authService.decodeUser(),this.isLoading=!1,this._Router.navigate(["/home"]))},error:o=>{this.errMessage=o.error.message,this.isLoading=!1}})}static#e=this.\u0275fac=function(o){return new(o||t)(e.Y36(f.e),e.Y36(h.F0))};static#n=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],standalone:!0,features:[e.jDz],decls:19,vars:14,consts:[[1,"container","w-75","mx-auto","shadow","rounded","p-4","my-5","bg-main-light"],[1,"text-center","mt-3","fw-bold"],[1,"my-3",3,"formGroup","ngSubmit"],["class","w-50 mx-auto text-center",4,"ngIf"],[1,"form-item","mt-2"],["for","email"],["formControlName","email","type","email","id","email",1,"form-control"],["class","alert alert-danger p-1 small w-50 text-center mx-auto",4,"ngIf"],["for","password"],["formControlName","password","type","password","id","password",1,"form-control"],[1,"main-btn","my-3",3,"disabled"],[4,"ngIf"],[1,"w-50","mx-auto","text-center"],[1,"alert","alert-danger","p-1","mb-0"],[1,"alert","alert-danger","p-1","small","w-50","text-center","mx-auto"],["class","mb-0",4,"ngIf"],[1,"mb-0"],[1,"fas","fa-spin","fa-spinner","text-warning"]],template:function(o,n){if(1&o&&(e.TgZ(0,"section")(1,"div",0)(2,"h1",1),e._uU(3,"Login Now"),e.qZA(),e.TgZ(4,"form",2),e.NdJ("ngSubmit",function(){return n.handleForm()}),e.YNc(5,v,3,1,"div",3),e.TgZ(6,"div",4)(7,"label",5),e._uU(8,"Email"),e.qZA(),e._UZ(9,"input",6),e.YNc(10,T,3,2,"div",7),e.qZA(),e.TgZ(11,"div",4)(12,"label",8),e._uU(13,"Password"),e.qZA(),e._UZ(14,"input",9),e.YNc(15,L,3,2,"div",7),e.qZA(),e.TgZ(16,"button",10),e._uU(17,"Login "),e.YNc(18,x,2,0,"span",11),e.qZA()()()()),2&o){let s,d,m,u,c,g;e.xp6(4),e.Q6J("formGroup",n.loginForm),e.xp6(1),e.Q6J("ngIf",n.errMessage),e.xp6(4),e.ekj("is-invalid",(null==(s=n.loginForm.get("email"))?null:s.errors)&&(null==(s=n.loginForm.get("email"))?null:s.touched))("is-valid",null==(null==(d=n.loginForm.get("email"))?null:d.errors)),e.xp6(1),e.Q6J("ngIf",(null==(m=n.loginForm.get("email"))?null:m.errors)&&(null==(m=n.loginForm.get("email"))?null:m.touched)),e.xp6(4),e.ekj("is-invalid",(null==(u=n.loginForm.get("password"))?null:u.errors)&&(null==(u=n.loginForm.get("password"))?null:u.touched))("is-valid",null==(null==(c=n.loginForm.get("password"))?null:c.errors)),e.xp6(1),e.Q6J("ngIf",(null==(g=n.loginForm.get("password"))?null:g.errors)&&(null==(g=n.loginForm.get("password"))?null:g.touched)),e.xp6(1),e.Q6J("disabled",n.loginForm.invalid),e.xp6(2),e.Q6J("ngIf",n.isLoading)}},dependencies:[p.ez,p.O5,l.UX,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u]})}return t})()}}]);